<!doctype html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Ø¬Ø¯ÙˆÙ„ Ù…Ø­Ø§Ø¶Ø±Ø§Øª Ø±Ù…Ø¶Ø§Ù†</title>

<style>
@import url('https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&display=swap');

:root {
  --bg:#f0f4f2;
  --card:#ffffff;
  --accent:#34624f;
  --gold:#d4af37;
  --muted:#6b705c;
  --friday:#cfe3d6;
  --header-col:#49876d;
  --first-col:#49876d;
}

html, body {
  margin:0;
  font-family:'Amiri', serif;
  background:var(--bg) url('https://www.toptal.com/designers/subtlepatterns/uploads/moroccan-flower.png') repeat;
  background-size:300px;
  color:#000;
}

.container {
  max-width:1000px;
  margin:20px auto;
  padding:15px;
}

.card {
  background:var(--card);
  border-radius:14px;
  padding:22px;
  border:4px solid var(--gold);
  box-shadow:0 8px 24px rgba(0,0,0,0.08);
  position:relative;
}

.card:before {
  content:"";
  position:absolute;
  top:-10px;
  left:-10px;
  right:-10px;
  bottom:-10px;
  border:3px solid var(--gold);
  border-radius:20px;
  pointer-events:none;
}

h1::before {
  content:"";
  display:block;
  width:140px;
  height:160px;
  margin:0 auto 10px auto;
  background:url('./img.png') center/contain no-repeat;
}

h1,h2 {
  font-size:26px;
  text-align:center;
  margin-bottom:15px;
  color:var(--accent);
  font-weight:700;
}

.table-wrapper {
  width:100%;
  overflow-x:auto;
  margin-top:10px;
}

table {
  width:100%;
  min-width:650px;
  border-collapse:collapse;
  font-size:18px;
  background:#fff;
  border-radius:12px;
  overflow:hidden;
  border:2px solid #a9a9a9;
  table-layout:fixed;
}

thead th {
  background:var(--header-col);
  color:#fff;
  text-align:center;
  padding:14px;
  border:1px solid #a9a9a9;
}

tbody td {
  padding:16px;
  text-align:center;
  border:1px solid #a9a9a9;
  word-wrap:break-word;
}

tbody tr:nth-child(odd) { background: rgba(245,245,245,0.7); }
tbody tr:nth-child(even) { background:#ffffff; }
tbody tr:hover { background:#e0f0e8; }
tbody td:first-child { background:var(--first-col); color:#fff; font-weight:700; width:120px; }
tbody tr.friday { background-color:var(--friday) !important; }

select {
  width:100%;
  padding:8px;
  font-size:16px;
  border-radius:8px;
  border:1px solid #a9a9a9;
  background:#fff;
  cursor:pointer;
  text-align-last:center;
}

.card-header {
  display:flex;
  justify-content:space-between;
  align-items:center;
  flex-wrap:wrap;
  padding:12px 10px;
}

#saveBtn,#printBtn {
  padding:10px 16px;
  border-radius:12px;
  cursor:pointer;
  font-weight:bold;
  color:#fff;
  font-size:15px;
  border:none;
  transition:0.2s;
}

#saveBtn { background: var(--gold); }
#printBtn { background: var(--accent); margin-left:10px; }

#saveMessage { color:green; font-weight:bold; display:none; margin-right:8px; }

/* â­ Ø§Ù„Ø·Ø¨Ø§Ø¹Ø© Ù…Ø·Ø§Ø¨Ù‚Ø© Ù„Ù„ØµÙØ­Ø© Ø§Ù„Ø£ØµÙ„ÙŠØ© */
@media print {
  #saveBtn,
  #printBtn {
    display:none;
  }
}
</style>

<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>
</head>

<body>

<div class="container">
  <div class="card">

    <div class="card-header">
      <div style="display:flex;align-items:center;">
        <button id="saveBtn">ğŸ’¾ Ø­ÙØ¸</button>
        <span id="saveMessage">ØªÙ… Ø§Ù„Ø­ÙØ¸ Ø¨Ù†Ø¬Ø§Ø­ âœ…</span>
        <button id="printBtn">ğŸ–¨ï¸ Ø·Ø¨Ø§Ø¹Ø©</button>
      </div>
    </div>

    <h1>Ø¬Ø¯ÙˆÙ„ Ù…Ø­Ø§Ø¶Ø±Ø§Øª Ø±Ù…Ø¶Ø§Ù† 1447 - Ø¬Ø§Ù…Ø¹ Ø§Ù„Ø¥Ù…Ø§Ù… Ø§Ù„Ø±Ø¨ÙŠØ¹ Ø¨Ù† Ø­Ø¨ÙŠØ¨</h1>
    <h2>Ø§Ù„Ø³ÙŠØ¨ - ÙˆØ§Ø¯ÙŠ Ø§Ù„Ù„ÙˆØ§Ù…ÙŠ</h2>

    <div class="table-wrapper">
      <table id="mainTable">
        <thead>
          <tr>
            <th>Ø§Ù„ØªØ§Ø±ÙŠØ®</th>
            <th>Ø§Ù„ÙˆÙ‚Øª</th>
            <th>Ø§Ø³Ù… Ø§Ù„Ù…Ø­Ø§Ø¶Ø±</th>
            <th>Ø±Ù‚Ù… Ø§Ù„ØªÙˆØ§ØµÙ„</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>

  </div>
</div>

<script>
const START_DATE = new Date(2026, 1, 19);
const END_DATE   = new Date(2026, 2, 20);
const weekdays = ["Ø§Ù„Ø£Ø­Ø¯","Ø§Ù„Ø§Ø«Ù†ÙŠÙ†","Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡","Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡","Ø§Ù„Ø®Ù…ÙŠØ³","Ø§Ù„Ø¬Ù…Ø¹Ø©","Ø§Ù„Ø³Ø¨Øª"];
const tbody = document.querySelector("#mainTable tbody");

/* Firebase */
const firebaseConfig = {
  apiKey: "YOUR_KEY",
  authDomain: "ramadan-1447.firebaseapp.com",
  databaseURL: "https://ramadan-1447-default-rtdb.firebaseio.com"
};

firebase.initializeApp(firebaseConfig);
const db = firebase.database();

/* Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø¬Ø¯ÙˆÙ„ */
function buildTable(savedData = []) {
  tbody.innerHTML = "";
  let ramadanDay = 1;

  for (let date = new Date(START_DATE); date <= END_DATE; date.setDate(date.getDate() + 1)) {
    const weekdayName = weekdays[date.getDay()];
    const dateStr = `${date.getDate()}/${date.getMonth()+1}/${date.getFullYear()} - ${weekdayName} - Ø±Ù…Ø¶Ø§Ù† ${ramadanDay}`;

    const tr = document.createElement("tr");
    if (weekdayName === "Ø§Ù„Ø¬Ù…Ø¹Ø©") tr.classList.add("friday");

    tr.innerHTML = `
      <td contenteditable="true">${savedData[ramadanDay-1]?.date || dateStr}</td>
      <td>
        <select>
          <option>Ø¨Ø¹Ø¯ ØµÙ„Ø§Ø© Ø§Ù„Ø¸Ù‡Ø±</option>
          <option>Ø¨Ø¹Ø¯ ØµÙ„Ø§Ø© Ø§Ù„Ø¹ØµØ±</option>
          <option>Ø¨Ø¹Ø¯ ØµÙ„Ø§Ø© Ø§Ù„Ù…ØºØ±Ø¨</option>
          <option>Ø¨Ø¹Ø¯ ØµÙ„Ø§Ø© Ø§Ù„Ø¹Ø´Ø§Ø¡</option>
        </select>
      </td>
      <td contenteditable="true">${savedData[ramadanDay-1]?.lecturer || ""}</td>
      <td contenteditable="true">${savedData[ramadanDay-1]?.contact || ""}</td>
    `;
    tbody.appendChild(tr);
    ramadanDay++;
  }
}

/* Ø­ÙØ¸ */
function saveData() {
  const rows = Array.from(tbody.querySelectorAll("tr")).map(tr => {
    const tds = tr.querySelectorAll("td");
    return {
      date: tds[0].textContent.trim(),
      time: tds[1].querySelector("select").value,
      lecturer: tds[2].textContent.trim(),
      contact: tds[3].textContent.trim()
    };
  });
  db.ref("ramadan_lectures").set(rows);

  const msg = document.getElementById("saveMessage");
  msg.style.display = "inline";
  setTimeout(() => msg.style.display = "none", 1500);
}

document.getElementById("saveBtn").onclick = saveData;

/* â­ Ø²Ø± Ø§Ù„Ø·Ø¨Ø§Ø¹Ø© */
document.getElementById("printBtn").addEventListener("click", () => {
  window.print();
});

/* ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª */
db.ref("ramadan_lectures").once("value").then(snapshot => {
  buildTable(snapshot.val() || []);
});
</script>

</body>
</html>

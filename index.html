<!doctype html>
<html lang="ar" dir="rtl">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ø¬Ø¯ÙˆÙ„ Ù…Ø­Ø§Ø¶Ø±Ø§Øª Ø±Ù…Ø¶Ø§Ù†</title>

  <!-- ===== CSS ===== -->
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&display=swap');

    :root{
      --bg:#f0f4f2;
      --card:#ffffff;
      --accent:#34624f;
      --gold:#d4af37;
      --friday:#cfe3d6;
      --header-col:#49876d;
      --first-col:#49876d;
    }

    html,body{
      margin:0;
      padding:1rem;
      font-family:'Amiri',serif;
      background:var(--bg)
        url('https://www.toptal.com/designers/subtlepatterns/uploads/moroccan-flower.png')
        repeat;
      background-size:300px;
    }

    table,th,td{
      border:1px solid #bdbdbd;
      text-align:center;
      vertical-align:middle;
    }

    .container{max-width:1000px;margin:auto}
    .card{
      background:#fff;
      border-radius:14px;
      padding:22px;
      border:4px solid var(--gold);
      box-shadow:0 8px 24px rgba(0,0,0,.08);
    }

    thead th{
      background:var(--header-col);
      color:#fff;
    }

    tbody td:first-child{
      background:var(--first-col);
      color:#fff;
      font-weight:700;
    }

    tbody tr.friday{background:var(--friday)}
    td[contenteditable]{direction:rtl}

    .card-header{
      display:flex;
      justify-content:space-between;
      align-items:center;
    }

    #saveBtn,#printBtn{
      padding:10px 16px;
      border-radius:12px;
      border:none;
      color:#fff;
      font-weight:bold;
      cursor:pointer;
    }

    #saveBtn{background:var(--gold)}
    #printBtn{background:var(--accent)}
    #saveMessage{display:none;color:green;font-weight:bold}

    @media print{
      body *{visibility:hidden}
      #mainTable,#mainTable *{visibility:visible}
      #mainTable{position:absolute;top:0;left:0;width:100%}
    }
  </style>

  <!-- ===== Firebase ===== -->
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>
</head>

<body>

  <!-- ===== HTML ===== -->
  <div class="container">
    <div class="card">

      <div class="card-header">
        <div>
          <button id="saveBtn">ğŸ’¾ Ø­ÙØ¸</button>
          <span id="saveMessage">ØªÙ… Ø§Ù„Ø­ÙØ¸ Ø¨Ù†Ø¬Ø§Ø­ âœ…</span>
          <button id="printBtn">ğŸ–¨ï¸ Ø·Ø¨Ø§Ø¹Ø©</button>
        </div>
      </div>

      <h1>Ø¬Ø¯ÙˆÙ„ Ù…Ø­Ø§Ø¶Ø±Ø§Øª Ø±Ù…Ø¶Ø§Ù† 1447 - Ø¬Ø§Ù…Ø¹ Ø§Ù„Ø¥Ù…Ø§Ù… Ø§Ù„Ø±Ø¨ÙŠØ¹ Ø¨Ù† Ø­Ø¨ÙŠØ¨</h1>
      <h2>Ø§Ù„Ø³ÙŠØ¨ - ÙˆØ§Ø¯ÙŠ Ø§Ù„Ù„ÙˆØ§Ù…ÙŠ</h2>

      <table id="mainTable">
        <thead>
          <tr>
            <th>Ø§Ù„ØªØ§Ø±ÙŠØ®</th>
            <th>Ø§Ù„ÙˆÙ‚Øª</th>
            <th>Ø§Ø³Ù… Ø§Ù„Ù…Ø­Ø§Ø¶Ø±</th>
            <th>Ø±Ù‚Ù… Ø§Ù„ØªÙˆØ§ØµÙ„</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>

    </div>
  </div>

  <!-- ===== JavaScript ===== -->
  <script>
    /* Firebase */
    firebase.initializeApp({
      apiKey:"AIzaSyCdhY4owQq8O6wgVOHcQQeaj2mrrwYr-j8",
      databaseURL:"https://ramadan-1447-default-rtdb.firebaseio.com"
    });

    const db = firebase.database();
    const tbody = document.querySelector("#mainTable tbody");
    const saveMessage = document.getElementById("saveMessage");

    /* Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø¬Ø¯ÙˆÙ„ */
    const TOTAL_DAYS = 29;
    const START_DATE = new Date(2026,1,19);
    const days = ["Ø§Ù„Ø£Ø­Ø¯","Ø§Ù„Ø§Ø«Ù†ÙŠÙ†","Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡","Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡","Ø§Ù„Ø®Ù…ÙŠØ³","Ø§Ù„Ø¬Ù…Ø¹Ø©","Ø§Ù„Ø³Ø¨Øª"];

    for(let i=1;i<=TOTAL_DAYS;i++){
      const tr=document.createElement("tr");
      const d=new Date(START_DATE);
      d.setDate(START_DATE.getDate()+i-1);
      const day=days[d.getDay()];
      if(day==="Ø§Ù„Ø¬Ù…Ø¹Ø©") tr.classList.add("friday");

      tr.innerHTML=`
        <td contenteditable>
          ${d.getDate()}/${d.getMonth()+1}/${d.getFullYear()} - ${day} - Ø±Ù…Ø¶Ø§Ù† ${i}
        </td>
        <td>
          <select>
            ${(day==="Ø§Ù„Ø¬Ù…Ø¹Ø©"
              ?["Ø¨Ø¹Ø¯ ØµÙ„Ø§Ø© Ø§Ù„Ø¬Ù…Ø¹Ø©","Ø¨Ø¹Ø¯ ØµÙ„Ø§Ø© Ø§Ù„Ø¹ØµØ±","Ø¨Ø¹Ø¯ ØµÙ„Ø§Ø© Ø§Ù„Ù…ØºØ±Ø¨","Ø¨Ø¹Ø¯ ØµÙ„Ø§Ø© Ø§Ù„Ø¹Ø´Ø§Ø¡"]
              :["Ø¨Ø¹Ø¯ ØµÙ„Ø§Ø© Ø§Ù„Ø¸Ù‡Ø±","Ø¨Ø¹Ø¯ ØµÙ„Ø§Ø© Ø§Ù„Ø¹ØµØ±","Ø¨Ø¹Ø¯ ØµÙ„Ø§Ø© Ø§Ù„Ù…ØºØ±Ø¨","Ø¨Ø¹Ø¯ ØµÙ„Ø§Ø© Ø§Ù„Ø¹Ø´Ø§Ø¡"]
            ).map(v=>`<option>${v}</option>`).join("")}
          </select>
        </td>
        <td contenteditable></td>
        <td contenteditable></td>
      `;
      tbody.appendChild(tr);
    }

    /* Ø­ÙØ¸ */
    tbody.addEventListener("input",()=>{
      const data=[...tbody.rows].map(r=>({
        date:r.cells[0].textContent.trim(),
        time:r.cells[1].querySelector("select").value,
        lecturer:r.cells[2].textContent.trim(),
        contact:r.cells[3].textContent.trim()
      }));
      db.ref("ramadan_lectures").set(data);
      saveMessage.style.display="inline";
      setTimeout(()=>saveMessage.style.display="none",1500);
    });

    /* Ø·Ø¨Ø§Ø¹Ø© */
    printBtn.onclick=()=>window.print();
  </script>

</body>
</html>
